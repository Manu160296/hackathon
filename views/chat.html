<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="../assets/icons/font-awesome-4.7.0/css/font-awesome.css"> 
  <link rel="stylesheet" href="../vendors/bootstrap-3.3.7-dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/chat.css">
  <title>Document</title>
</head>
<body class="grad">
    <div class="grad1">
      <div class="row">
        <div class="col-xs-12">
          <nav class="navbar navbar-default navbar-home">
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"> 
              <a href="../views/home.html"><h3 class="title text-center">Safanatics</h3></a>
              <a class="navbar-brand perfil" href="../views/home.html"><i class="fa fa-home" aria-hidden="true"></i>Home</a>
              <a class="navbar-brand perfil" href="../views/chat.html"><i class="glyphicon glyphicon-envelope" aria-hidden="true"></i>Chat</a>
              <!-- Collect the nav links, forms, and other content for toggling -->
              <a href="#" class="navbar-brand dropdown-toggle perfil" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perfil  <i class="fa fa-user-circle-o" aria-hidden="true"></i><span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#">Configuración</a></li>
                <li role="separator" class="divider"></li>
                <li class="log-out-js"><a href="#">Cerrar sesión</a></li>
              </ul>
            </div><!-- /.navbar-collapse -->
          </nav>
        </div>
      </div>


    <form class="container" action="">
      <ul class="mess" id="chatUl"></ul>
      <div class="conversacion">
          <label for="nombre">Nombre</label>
          <input type="text" id="nombre">
      </div>
      <div class="conversacion">
          <label for="mensaje">Mensaje</label>
          <textarea id="mensaje"></textarea>
      </div>
      <button class="btn-chat" type="button" id="btnEnviar">Enviar</button>
      </form>
    
      
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDW1o9U4yoqCKqmc_rZZJfULlQpcrE33m4",
    authDomain: "producto-2ce12.firebaseapp.com",
    databaseURL: "https://producto-2ce12.firebaseio.com",
    projectId: "producto-2ce12",
    storageBucket: "producto-2ce12.appspot.com",
    messagingSenderId: "846954295488"
  };
  firebase.initializeApp(config);

    
    var txtNombre = document.getElementById('nombre');
    var txtMensaje = document.getElementById('mensaje');
    var btnEnviar = document.getElementById('btnEnviar');
    var chatUl = document.getElementById('chatUl');
    
    btnEnviar.addEventListener("click", function() {
      var nombre = txtNombre.value;
      var mensaje = txtMensaje.value;
      var html = "<li><b>"+nombre+": </b>"+mensaje+"</li>";
      chatUl.innerHTML += html;
    
      firebase.database().ref('chat').push({
          name: nombre,
          menssaje: mensaje
      });
    });
    
    firebase.database().ref('chat')
    .on('value', function(snapshot) {
        var html = '';
        snapshot.forEach(function (e) {
          var element = e.val();
          var nombre = element.name;
          var mensaje = element.menssaje;
          html+= "<li><b>"+nombre+": </b>"+mensaje+"</li>";
        });
        chatUl.innerHTML = html;
    });
    </script>
